package uk.ac.ed.inf;import com.fasterxml.jackson.databind.ObjectMapper;import com.fasterxml.jackson.databind.SerializationFeature;import com.fasterxml.jackson.databind.module.SimpleModule;import uk.ac.ed.inf.ilp.data.Order;import java.awt.*;import java.io.File;import java.io.IOException;import java.nio.file.Files;import java.nio.file.Path;import java.nio.file.Paths;import java.nio.file.StandardOpenOption;import java.time.LocalDate;import java.time.format.DateTimeFormatter;import java.util.ArrayList;import java.util.Arrays;import java.util.Collections;import java.util.List;import java.util.stream.Collectors;public class DroneDeliveryRecorder {    private LocalDate date;    private Path resultFilesDirectory;    private ObjectMapper objectMapper;    public DroneDeliveryRecorder(LocalDate date) {        this.date = date;        this.resultFilesDirectory = Paths.get("ResultFiles");        this.objectMapper = new ObjectMapper();        this.objectMapper.enable(SerializationFeature.INDENT_OUTPUT);        try {            Files.createDirectories(resultFilesDirectory); // Ensure the directory exists        } catch (IOException e) {            e.printStackTrace();        }    }    public void createDeliveriesFile(List<Order> orders) {        String filename = "deliveries-" + date.format(DateTimeFormatter.ofPattern("yyyy-MM-dd")) + ".json";        Path filePath = resultFilesDirectory.resolve(filename);        SimpleModule module = new SimpleModule();        module.addSerializer(Order.class, new CustomOrderSerializer());        objectMapper.registerModule(module);        try {            String jsonContent = objectMapper.writeValueAsString(orders);            Files.writeString(filePath, jsonContent, StandardOpenOption.CREATE);        } catch (IOException e) {            e.printStackTrace();        }    }    public void createFlightPathFile(List<List<DroneMove>> droneMovesLists) {        List<DroneMove> allMoves = droneMovesLists.stream()                .flatMap(List::stream)                .collect(Collectors.toList());        String filename = "flightpath-" + date.format(DateTimeFormatter.ofPattern("yyyy-MM-dd")) + ".json";        Path filePath = resultFilesDirectory.resolve(filename);        this.objectMapper = new ObjectMapper();        this.objectMapper.enable(SerializationFeature.INDENT_OUTPUT);        try {            String jsonContent = objectMapper.writeValueAsString(allMoves);            Files.writeString(filePath, jsonContent, StandardOpenOption.CREATE, StandardOpenOption.TRUNCATE_EXISTING);        } catch (IOException e) {            e.printStackTrace();        }    }}